import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as t,d as e,a as n,e as r,f as s,o as l}from"./app-DB5Ixhye.js";const o={};function d(g,i){return l(),t("div",null,[i[0]||(i[0]=e("h1",{id:"自建docker镜像代理加速",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#自建docker镜像代理加速"},[e("span",null,"自建Docker镜像代理加速")])],-1)),i[1]||(i[1]=e("p",null,[s("Docker Hub 是一个容器注册表，专为开发人员和开源贡献者构建，用于查找、使用和共享其容器镜像。但从2023年5月中旬，"),e("a",{href:"http://hub.docker.com",target:"_blank",rel:"noopener noreferrer"},"hub.docker.com"),s(" “不知” 何种原因国内均无法正常访问了，好在国内各大高校和容器技术社区提供了加速站点，国内开发者还是能获取到各种镜像。")],-1)),n(" more "),i[2]||(i[2]=r(`<figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017430.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>好景不长，今年6月份各大高校和容器技术社区由于一些不可抗因素，纷纷关闭了镜像加速站点，这极大地影响了工作效率和开发进度。</p><p>为了继续使用DockerHub获取各种各样的镜像数据，我们可以尝试自己搭建代理，中转对Docker官方镜像仓库的请求，解决一些访问限制和加速访问的问题。下文介绍基于Cloudflare Workers的Docker镜像代理部署和使用。</p><h2 id="部署dockerhub代理" tabindex="-1"><a class="header-anchor" href="#部署dockerhub代理"><span>部署DockerHub代理</span></a></h2><h3 id="fork仓库-cf-workers-docker-io" tabindex="-1"><a class="header-anchor" href="#fork仓库-cf-workers-docker-io"><span>fork仓库 <a href="http://CF-Workers-docker.io" target="_blank" rel="noopener noreferrer">CF-Workers-docker.io</a></span></a></h3><p>将 <a href="https://github.com/cmliu/CF-Workers-docker.io" target="_blank" rel="noopener noreferrer">CF-Workers-docker.io</a> fork到自己仓库。</p><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017433.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="部署到cloudflare的pages中" tabindex="-1"><a class="header-anchor" href="#部署到cloudflare的pages中"><span>部署到Cloudflare的pages中</span></a></h3><ul><li>创建pages应用</li></ul><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017434.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>连接GitHub</li></ul><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017435.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>选择存储库部署</li></ul><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017436.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>等待部署完成</li></ul><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017437.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>获取镜像代理域名</li></ul><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017438.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017439.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>自定义域名（可选）</li></ul><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017440.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017441.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017442.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><figure><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017443.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="如何配置镜像加速" tabindex="-1"><a class="header-anchor" href="#如何配置镜像加速"><span>如何配置镜像加速</span></a></h2><h3 id="官方镜像路径前加域名" tabindex="-1"><a class="header-anchor" href="#官方镜像路径前加域名"><span>官方镜像路径前加域名</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dockers.shawnxie.top/library/nginx:latest</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="设置镜像加速docker配置" tabindex="-1"><a class="header-anchor" href="#设置镜像加速docker配置"><span>设置镜像加速docker配置</span></a></h3><p>修改文件 /etc/docker/daemon.json（如果不存在则创建）</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/docker</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/docker/daemon.json</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;&lt;-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&#39;EOF&#39;</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">{</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  &quot;registry-mirrors&quot;: [&quot;https://dockers.shawnxie.top&quot;]  # 请替换为您自己的Worker自定义域名</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以执行 docker info命令，如果从结果中看到了如下内容，说明配置成功。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> info</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">---</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Registry</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mirrors:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    https://dockers.shawnxie.top</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div style="text-align:center;"> —— 完 —— </div><hr><p>关注“<strong>肖恩聊技术</strong>”公众号，原创技术文章第一时间推送~</p><img src="https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/20241103221454.png" alt="公众号二维码" width="300">`,36))])}const c=a(o,[["render",d]]),k=JSON.parse('{"path":"/blogs/tools/docker-proxy.html","title":"自建Docker镜像代理加速","lang":"zh-CN","frontmatter":{"icon":"en-to-square","date":"2024-09-05T00:00:00.000Z","category":["技术提效"],"tag":["Docker Hub","代理","教程"],"description":"Docker Hub 是一个容器注册表，专为开发人员和开源贡献者构建，用于查找、使用和共享其容器镜像。但从2023年5月中旬，hub.docker.com “不知” 何种原因国内均无法正常访问了，好在国内各大高校和容器技术社区提供了加速站点，国内开发者还是能获取到各种镜像。","head":[["meta",{"property":"og:url","content":"https://shawnxie.top/blogs/tools/docker-proxy.html"}],["meta",{"property":"og:site_name","content":"肖恩聊技术"}],["meta",{"property":"og:title","content":"自建Docker镜像代理加速"}],["meta",{"property":"og:description","content":"Docker Hub 是一个容器注册表，专为开发人员和开源贡献者构建，用于查找、使用和共享其容器镜像。但从2023年5月中旬，hub.docker.com “不知” 何种原因国内均无法正常访问了，好在国内各大高校和容器技术社区提供了加速站点，国内开发者还是能获取到各种镜像。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017430.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-10T09:50:29.000Z"}],["meta",{"property":"article:tag","content":"Docker Hub"}],["meta",{"property":"article:tag","content":"代理"}],["meta",{"property":"article:tag","content":"教程"}],["meta",{"property":"article:published_time","content":"2024-09-05T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-10T09:50:29.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"自建Docker镜像代理加速\\",\\"image\\":[\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017430.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017433.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017434.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017435.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017436.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017437.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017438.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017439.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017440.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017441.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017442.png\\",\\"https://cdn.jsdelivr.net/gh/Xiaoxie1994/images/images/202411270017443.png\\"],\\"datePublished\\":\\"2024-09-05T00:00:00.000Z\\",\\"dateModified\\":\\"2025-05-10T09:50:29.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"ShawnXie\\",\\"url\\":\\"https://shawnxie.top\\"}]}"]]},"headers":[{"level":2,"title":"部署DockerHub代理","slug":"部署dockerhub代理","link":"#部署dockerhub代理","children":[{"level":3,"title":"fork仓库 CF-Workers-docker.io","slug":"fork仓库-cf-workers-docker-io","link":"#fork仓库-cf-workers-docker-io","children":[]},{"level":3,"title":"部署到Cloudflare的pages中","slug":"部署到cloudflare的pages中","link":"#部署到cloudflare的pages中","children":[]}]},{"level":2,"title":"如何配置镜像加速","slug":"如何配置镜像加速","link":"#如何配置镜像加速","children":[{"level":3,"title":"官方镜像路径前加域名","slug":"官方镜像路径前加域名","link":"#官方镜像路径前加域名","children":[]},{"level":3,"title":"设置镜像加速docker配置","slug":"设置镜像加速docker配置","link":"#设置镜像加速docker配置","children":[]}]}],"git":{"createdTime":1746870629000,"updatedTime":1746870629000,"contributors":[{"name":"Shawn Xie","username":"Shawn Xie","email":"xiexiao064@gmail.com","commits":1,"url":"https://github.com/Shawn Xie"}]},"readingTime":{"minutes":1.71,"words":513},"filePathRelative":"blogs/tools/docker-proxy.md","localizedDate":"2024年9月5日","excerpt":"\\n<p>Docker Hub 是一个容器注册表，专为开发人员和开源贡献者构建，用于查找、使用和共享其容器镜像。但从2023年5月中旬，<a href=\\"http://hub.docker.com\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">hub.docker.com</a> “不知” 何种原因国内均无法正常访问了，好在国内各大高校和容器技术社区提供了加速站点，国内开发者还是能获取到各种镜像。</p>\\n","autoDesc":true}');export{c as comp,k as data};
